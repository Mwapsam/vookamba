<% if user_signed_in? && current_user.role == "admin" %>
    <div class="d-flex mt-5">
        <%= render 'shared/admin'%>
        <div class="container">
            <table class="table">
                <thead>
                    <tr>
                    <th scope="col">#</th>
                    <th scope="col">Username</th>
                    <th scope="col">Email</th>
                    <th scope="col">Role</th>
                    <th scope="col">Action</th>
                    </tr>
                </thead>
                <tbody>
                    <% @users.each do |user| %>
                        <tr>
                            <th scope="row"><%= user.id%></th>
                            <td><%= link_to user.username, users_show_path, data: {turbo: false} %></td>
                            <td><%= user.email%></td>
                            <td><%= user.role%></td>
                            <% if user.role == 'subscriber'%>
                                <td><%= link_to '', users_destroy_path(user.id), class: "bi bi-trash-fill text-danger", data: {turbo_method: :delete, turbo_confirm: 'Are you sure?'}%></td>
                            <% else %>
                                <td><i class="bi bi-trash-fill"></i></td>
                            <% end %>
                        </tr>
                    <% end %>
                </tbody>
            </table>
        </div>
    </div>
<% else %>
    <div class="container">
        <h3 class="text-center text-danger">Access denied!</h3>
    </div>
<% end %>