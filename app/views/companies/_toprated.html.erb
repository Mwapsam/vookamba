<% @top_rated.each do |top| %>
    <div class="col-lg-3 col-sm-6 mb-4">            
        <div class="card m-3">
            <%= link_to company_path(top.id), data: { turbo: false } do %>
                <%= image_tag top.image, class: "card-img-top magnitude" %>
                <div class="text-center pt-3">
                    <div class="d-flex justify-content-around">
                        <div>
                            <div class="average-review-rating" data-score=<%= top.reviews.average(:rating).round(2) %>></div>
                        </div>
                        <p class="fw-bolder"><%= top.reviews.average(:rating).round(2)%> rating</p>
                    </div>
                    <p class="p-text p-2"><%= top.name %></p>
                </div>
            <% end %>
        </div>
    </div>
<% end %>

<script>
  $('.average-review-rating').raty({
    readOnly: true,
        score: function() {
            return $(this).attr('data-score');
        },
        path: '/assets/'
  })
</script>
