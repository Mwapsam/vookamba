<% if user_signed_in? && current_user.role == "admin" %>
    <div class="d-flex mt-5">
        <%= render 'shared/admin'%>
        <div class="container">
            <table class="table">
                <thead>
                    <tr>
                    <th scope="col">#</th>
                    <th scope="col">COMPANY NAME</th>
                    <th scope="col">APPROVED</th>
                    <th scope="col">ACTION</th>
                    </tr>
                </thead>
                <tbody>
                    <% @companies.each do |company| %>
                        <tr>
                            <th scope="row"><%= company.id%></th>
                            <td><%= company.name%></td>
                            <td>
                                <% if company.approved %>
                                    <p>Approved</p>
                                <% else %>
                                    <p>Not approved</p>
                                <% end%>
                            </td>
                            <td>
                                <%= form_with model: company, url: company_path(company.id), method: :patch, local: true do |form| %>
                                    <div class="form-switch">
                                        <%= form.check_box :approved, class: "form-check-input", onchange: 'this.form.submit()' %>
                                        <%= form.label :approved, 'Approve', class: "form-check-label", checked: company.approved %> <br />
                                    </div>
                                <% end %>
                            </td>
                        </tr>
                    <% end %>
                </tbody>
            </table>
        </div>
    </div>
<% end %>